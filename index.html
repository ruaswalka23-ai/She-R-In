<script>
  (function() {
    const htmlElement = document.documentElement;
    const themeToggle = document.getElementById('themeToggle');
    const moonIcon = document.getElementById('moon-icon');
    const sunIcon = document.getElementById('sun-icon');
    const langSelect = document.getElementById('langSelect');

    // --- Theme Toggle Functionality ---
    function applyTheme(theme) {
      htmlElement.setAttribute('data-theme', theme);
      if (theme === 'light') {
        moonIcon.style.display = 'none';
        sunIcon.style.display = 'block';
      } else {
        moonIcon.style.display = 'block';
        sunIcon.style.display = 'none';
      }
      localStorage.setItem('theme', theme);
    }

    themeToggle.addEventListener('click', () => {
      const currentTheme = htmlElement.getAttribute('data-theme') || 'dark';
      const newTheme = currentTheme === 'light' ? 'dark' : 'light';
      applyTheme(newTheme);
    });

    // Initialize theme from localStorage
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      applyTheme(savedTheme);
    } else {
      // Default to dark if no theme is saved
      applyTheme('dark');
    }

    // --- Language Toggle Functionality ---
    const TR = { // Your existing translations object
      ar: {
        nav_policy:'Ø³ÙŠØ§Ø³ØªÙ†Ø§', nav_services:'Ø®Ø¯Ù…Ø§ØªÙ†Ø§', nav_platforms:'Ø§Ù„Ù…Ù†ØµÙ‘Ø§Øª', nav_contact:'Ø§ØªØµÙ„ Ø¨Ù†Ø§',
        hero_tag:'Ø§Ø¨Ø­Ø«ØŒ Ù‚Ø§Ø±Ù†ØŒ Ø§Ø®ØªØ±.. Ø¨ÙƒÙ„ Ø³Ù‡ÙˆÙ„Ø©', hero_title:'Ù‡ÙŠ Ø¨ÙˆØ§Ø¨Ø© Ø¯Ø®ÙˆÙ„Ùƒ Ø¥Ù„Ù‰ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„ØµÙŠÙ†ÙŠØ©', hero_desc:'Ù†Ù‚Ø¯Ù‘Ù… Ø®Ø¯Ù…Ø§Øª Ø´Ø­Ù† Ø´Ø§Ù…Ù„Ø©: Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ù…Ù†ØªØ¬Ø§ØªØŒ Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø¨ÙŠÙ† Ø§Ù„Ù…ÙˆØ±Ù‘Ø¯ÙŠÙ†ØŒ Ø§Ù„Ø¥Ø´Ø±Ø§Ù Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±Ø§Ø¡ØŒ Ø§Ù„ØªØ®Ù„ÙŠØµ Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠØŒ ÙˆØ§Ù„Ø´Ø­Ù† Ø¥Ù„Ù‰ Ø£ÙŠ Ù…ÙƒØ§Ù† ÙÙŠ Ø§Ù„Ø¹Ø§Ù„Ù…â€”Ø¨Ø­Ù„ÙˆÙ„ Ù…Ø®ØµÙ‘ØµØ© ØªÙ†Ø§Ø³Ø¨ Ù…Ø´Ø±ÙˆØ¹Ùƒ.',
        cta_book:'Ø§Ø­Ø¬Ø² Ø§Ù„Ø¢Ù†', cta_services:'ØªØ¹Ø±Ù‘Ù Ø¹Ù„Ù‰ Ø§Ù„Ø®Ø¯Ù…Ø§Øª',
        about_title:'Ø³ÙŠØ§Ø³ØªÙ†Ø§', about_text:'Ù†Ù„ØªØ²Ù… Ø¨Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø´ÙØ§ÙÙŠØ©: Ø³Ù†Ø¯ Ù‚Ø¨Ø¶ Ù„Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ ÙˆØ¥Ø«Ø¨Ø§Øª Ø´Ø±Ø§Ø¡ØŒ Ù…Ø¹ Ø¥Ù…ÙƒØ§Ù†ÙŠÙ‘Ø© ØªØªØ¨Ù‘Ø¹ Ø·Ù„Ø¨Ùƒ ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª. Ø¹Ø§Ø¯Ø©Ù‹ ÙŠØµÙ„ Ø§Ù„Ø·Ù„Ø¨ Ø®Ù„Ø§Ù„ <strong>45â€“60 ÙŠÙˆÙ…Ù‹Ø§</strong> Ù…Ù† ØªØ§Ø±ÙŠØ® Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ø­Ø§ÙˆÙŠØ©.',
        services_title:'Ø®Ø¯Ù…Ø§ØªÙ†Ø§',
        shipping_header: 'ÙƒÙ„ Ù…Ø§ ÙŠÙ‡Ù…Ùƒ Ø¹Ù† Ø§Ù„Ø´Ø­Ù† Ù…Ø¹Ù†Ø§',
        shipping_list: '<li>Ù†Ù‚ÙˆÙ… Ø¨Ø§Ù„Ø´Ø­Ù† Ù…Ù† **Ø£ÙŠ Ù…ÙƒØ§Ù† ÙÙŠ Ø§Ù„ØµÙŠÙ†** Ø¥Ù„Ù‰ Ø§Ù„Ø£Ø±Ø¯Ù†.</li><li>Ù†Ù‚ÙˆÙ… Ø¨Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ø´Ø­Ù†Ø§Øª Ù…Ù† Ø§Ù„Ù…ÙˆØ±Ù‘Ø¯ÙŠÙ† ÙÙŠ Ø§Ù„ØµÙŠÙ†ØŒ ÙˆØ¯Ù…Ø¬Ù‡Ø§ Ù…Ø¹ Ø¨Ø¹Ø¶Ù‡Ø§ ÙÙŠ Ø­Ø§ÙˆÙŠØ§Øª Ø´Ø­Ù†.</li><li>Ø³ÙˆØ§Ø¡ ÙƒØ§Ù† Ù„Ø¯ÙŠÙƒ Ø´Ø­Ù†Ø© ØµØºÙŠØ±Ø© Ø£Ùˆ ÙƒØ¨ÙŠØ±Ø©ØŒ Ù†Ù‚ÙˆÙ… Ø¨ØªØ¬Ù‡ÙŠØ²Ù‡Ø§ Ù„Ù„Ø´Ø­Ù† Ø§Ù„Ø¨Ø­Ø±ÙŠ Ø£Ùˆ Ø§Ù„Ø¬ÙˆÙŠ.</li><li>Ù†Ø­Ù† Ù†ØªÙƒÙÙ„ Ø¨Ø¬Ù…ÙŠØ¹ Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª Ø§Ù„ØªØ®Ù„ÙŠØµ Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ ÙÙŠ Ø§Ù„Ø£Ø±Ø¯Ù†ØŒ ÙˆÙ†Ù‚ÙˆÙ… Ø¨ØªØ³Ù„ÙŠÙ… Ø§Ù„Ø´Ø­Ù†Ø© ÙÙŠ Ø¹Ù†ÙˆØ§Ù†Ùƒ.</li><li>Ù†Ø¶Ù…Ù† Ø§Ù„ØªÙˆØµÙŠÙ„ Ø¥Ù„Ù‰ **Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø§Øª** ÙÙŠ Ø§Ù„Ø£Ø±Ø¯Ù†.</li>',
        experts_header: 'Ø®Ø¨Ø±Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ù†ØªØ¬',
        experts_list: '<li>Ù…Ù† Ø®Ø¨Ø±ØªÙ†Ø§ Ø§Ù„ÙˆØ§Ø³Ø¹Ø©ØŒ Ù†Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ **Ø§Ø®ØªÙŠØ§Ø± Ø£ÙØ¶Ù„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª** Ù…Ù† Ø¨ÙŠÙ† Ù…Ø¦Ø§Øª Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†.</li><li>Ù†Ø¶Ù…Ù† Ù„Ùƒ ØªØ­Ù‚ÙŠÙ‚ Ø§Ù„Ø¬ÙˆØ¯Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù…Ù†ØªØ¬ÙƒØŒ ÙˆÙ†ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ø³Ø¹Ø± ÙŠÙ†Ø§Ø³Ø¨ Ù…ÙŠØ²Ø§Ù†ÙŠØªÙƒ.</li><li>ÙØ±ÙŠÙ‚Ù†Ø§ ÙŠÙ‚ÙˆÙ… Ø¨Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªÙØ§ÙˆØ¶ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ† Ù†ÙŠØ§Ø¨Ø© Ø¹Ù†Ùƒ.</li>',
        safety_header: 'Ø§Ù„Ø£Ù…Ø§Ù† ÙˆØ§Ù„Ø´ÙØ§ÙÙŠØ©',
        safety_list: '<li>ÙŠØªÙ… ØªØ³Ù„ÙŠÙ…Ùƒ **Ø³Ù†Ø¯ Ù‚Ø¨Ø¶** Ø±Ø³Ù…ÙŠ Ø¨Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¯ÙØ¹Ø© Ø§Ù„Ø£ÙˆÙ„Ù‰ Ø§Ù„ØªÙŠ Ù‚Ù…Øª Ø¨Ø¯ÙØ¹Ù‡Ø§.</li><li>Ù†Ù‚Ø¯Ù… Ù„Ùƒ **Ø¥Ø«Ø¨Ø§ØªØ§Øª Ø´Ø±Ø§Ø¡** ÙƒØ§Ù…Ù„Ø© Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø´ÙØ§ÙÙŠØ© Ø§Ù„ØªØ§Ù…Ø©.</li><li>ÙŠÙ…ÙƒÙ†Ùƒ **ØªØªØ¨Ø¹ Ø·Ù„Ø¨Ùƒ** ÙÙŠ Ø£ÙŠ ÙˆÙ‚Øª Ù…Ù† Ø®Ù„Ø§Ù„ ÙØ±ÙŠÙ‚Ù†Ø§ Ø§Ù„Ù…Ø®ØªØµ.</li>',
        local_platforms_title: 'Ø§Ø³ØªÙŠØ±Ø§Ø¯Ùƒ Ù…Ù† Ø§Ù„Ù…Ù†ØµÙ‘Ø§Øª Ø§Ù„ØµÙŠÙ†ÙŠØ© Ø§Ù„Ù…Ø­Ù„ÙŠØ©',
        platforms_title:'Ø§Ù„Ù…Ù†ØµÙ‘Ø§Øª Ø§Ù„ØªÙŠ Ù†ØºØ·ÙŠÙ‡Ø§', guides_title:'ÙƒÙ„ Ù…Ø§ ØªÙˆØ¯ Ù…Ø¹Ø±ÙØªÙ‡ Ø¹Ù† Ø¹Ù„ÙŠ Ø¨Ø§Ø¨Ø§ ÙˆØ¹Ù„ÙŠ Ø§ÙƒØ³Ø¨Ø±ÙŠØ³',
        contact_title:'Ø§ØªØµÙ„ Ø¨Ù†Ø§', kpi_title:'Ø£Ø±Ù‚Ø§Ù… Ø³Ø±ÙŠØ¹Ø©',
        eta_label:'Ù…ÙˆØ¹Ø¯ Ø£Ù‚Ø±Ø¨ Ø­Ø§ÙˆÙŠØ©',
        contact_addr:'Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: AVT, Rae\'d Khalaf Complex, Sweifieh â€“ Amman',
        contact_hours:'Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¹Ù…Ù„: Ø§Ù„Ø£Ø­Ø¯â€“Ø§Ù„Ø®Ù…ÙŠØ³ 09:00â€“21:00 â€¢ Ø§Ù„Ø¬Ù…Ø¹Ø©â€“Ø§Ù„Ø³Ø¨Øª: Ù…ØºÙ„Ù‚',
        form_send:'Ø¥Ø±Ø³Ø§Ù„', form_whatsapp:'Ù…Ø±Ø§Ø³Ù„Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨',
        calculator_title: 'Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø³Ø¹Ø±',
        calc_price_label: 'Ø³Ø¹Ø± Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø± ($):', calc_price_placeholder: 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø³Ø¹Ø± Ø¨Ø§Ù„Ø¯ÙˆÙ„Ø§Ø±',
        calc_internal_fee_label: 'Ø±Ø³ÙˆÙ… Ø§Ù„Ù†Ù‚Ù„ Ø§Ù„Ø¯Ø§Ø®Ù„ÙŠ ($):', calc_internal_fee_placeholder: 'Ø£Ø¯Ø®Ù„ Ø±Ø³ÙˆÙ… Ø§Ù„Ù†Ù‚Ù„',
        calc_size_label: 'Ø­Ø¬Ù… Ø§Ù„Ù…Ù†ØªØ¬ (Ø¨Ø§Ù„Ù…ØªØ± Ø§Ù„Ù…ÙƒØ¹Ø¨):', calc_size_placeholder: 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø­Ø¬Ù… Ø¨Ø§Ù„Ù…ØªØ± Ø§Ù„Ù…ÙƒØ¹Ø¨',
        calc_button: 'Ø§Ø­Ø³Ø¨ Ø§Ù„Ø³Ø¹Ø±',
        calc_result_prefix: 'ğŸ’° Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: ', calc_result_suffix: ' Ø¯ÙŠÙ†Ø§Ø± Ø£Ø±Ø¯Ù†ÙŠ'
      },
      en: {
        nav_policy:'Policy', nav_services:'Services', nav_platforms:'Platforms', nav_contact:'Contact',
        hero_tag:'Search. Compare. Chooseâ€”easily.', hero_title:'Your gateway to the Chinese market', hero_desc:'We provide end-to-end shipping: sourcing, supplier comparison, purchase supervision, customs clearance, and worldwide deliveryâ€”tailored to your business.',
        cta_book:'Book Now', cta_services:'Explore Services',
        about_title:'Our Policy', about_text:'We commit to safety and transparency: official receipt for the deposit and proof of purchase, plus full order tracking. Typical arrival: 45â€“60 days from container closing.',
        services_title:'Our Services',
        shipping_header: 'All You Need to Know About Shipping with Us',
        shipping_list: '<li>We ship from **anywhere in China** to Jordan.</li><li>We receive shipments from suppliers in China and consolidate them into shipping containers.</li><li>Whether you have a small or large shipment, we prepare it for sea or air freight.</li><li>We handle all customs clearance procedures in Jordan and deliver the shipment to your address.</li><li>We guarantee delivery to **all governorates** in Jordan.</li>',
        experts_header: 'Product Selection Experts',
        experts_list: '<li>With our extensive experience, we help you **choose the best products** from hundreds of suppliers.</li><li>We ensure your product meets the required quality and fits your budget.</li><li>Our team researches and negotiates with suppliers on your behalf.</li>',
        safety_header: 'Safety and Transparency',
        safety_list: '<li>You will receive an official **receipt** for your initial deposit.</li><li>We provide complete **proof of purchase** for full transparency.</li><li>You can **track your order** at any time through our specialized team.</li>',
        local_platforms_title: 'Importing from Local Chinese Platforms',
        platforms_title:'Platforms We Cover', guides_title:'All You Need to Know About Alibaba & AliExpress',
        contact_title:'Contact Us', kpi_title:'Quick Numbers',
        eta_label:'Next Container ETA',
        contact_addr:'Address: AVT, Rae\'d Khalaf Complex, Sweifieh â€“ Amman',
        contact_hours:'Working Hours: Sun-Thu 09:00-21:00 â€¢ Fri-Sat: Closed',
        form_send:'Send', form_whatsapp:'WhatsApp Message',
        calculator_title: 'Price Calculator',
        calc_price_label: 'Product Price in USD ($):', calc_price_placeholder: 'Enter price in USD',
        calc_internal_fee_label: 'Internal Shipping Fee ($):', calc_internal_fee_placeholder: 'Enter shipping fee',
        calc_size_label: 'Product Size (mÂ³):', calc_size_placeholder: 'Enter volume in mÂ³',
        calc_button: 'Calculate Price',
        calc_result_prefix: 'ğŸ’° Final Price: ', calc_result_suffix: ' Jordanian Dinar'
      },
      zh: {
        nav_policy:'æ”¿ç­–', nav_services:'æœåŠ¡', nav_platforms:'å¹³å°', nav_contact:'è”ç³»æˆ‘ä»¬',
        hero_tag:'æœç´¢. æ¯”è¾ƒ. é€‰æ‹© â€” è½»è€Œæ˜“ä¸¾', hero_title:'æ‚¨çš„ä¸­å›½å¸‚åœºå…¥å£', hero_desc:'æˆ‘ä»¬æä¾›ç«¯åˆ°ç«¯è¿è¾“æœåŠ¡ï¼šé‡‡è´­ã€ä¾›åº”å•†æ¯”è¾ƒã€é‡‡è´­ç›‘ç£ã€æ¸…å…³å’Œå…¨çƒé…é€ â€” é‡èº«å®šåˆ¶æ‚¨çš„ä¸šåŠ¡ã€‚',
        cta_book:'ç«‹å³é¢„è®¢', cta_services:'äº†è§£æœåŠ¡',
        about_title:'æˆ‘ä»¬çš„æ”¿ç­–', about_text:'æˆ‘ä»¬è‡´åŠ›äºå®‰å…¨ä¸é€æ˜ï¼šæä¾›æŠ¼é‡‘æ”¶æ®å’Œè´­ä¹°è¯æ˜ï¼Œå¹¶å¯å…¨ç¨‹è¿½è¸ªè®¢å•ã€‚é€šå¸¸åœ¨é›†è£…ç®±å°ç®±æ—¥æœŸå 45-60 å¤©é€è¾¾ã€‚',
        services_title:'æˆ‘ä»¬çš„æœåŠ¡',
        shipping_header: 'æ‚¨éœ€è¦äº†è§£çš„å…³äºæˆ‘ä»¬è¿è¾“çš„æ‰€æœ‰ä¿¡æ¯',
        shipping_list: '<li>æˆ‘ä»¬ä»**ä¸­å›½ä»»ä½•åœ°æ–¹**è¿å¾€çº¦æ—¦ã€‚</li><li>æˆ‘ä»¬æ¥æ”¶æ¥è‡ªä¸­å›½ä¾›åº”å•†çš„è´§ç‰©ï¼Œå¹¶å°†å®ƒä»¬æ•´åˆåˆ°é›†è£…ç®±ä¸­ã€‚</li><li>æ— è®ºæ‚¨æœ‰å°æ‰¹é‡è¿˜æ˜¯å¤§æ‰¹é‡è´§ç‰©ï¼Œæˆ‘ä»¬éƒ½èƒ½ä¸ºæ‚¨å‡†å¤‡æµ·è¿æˆ–ç©ºè¿ã€‚</li><li>æˆ‘ä»¬å¤„ç†çº¦æ—¦çš„æ‰€æœ‰æ¸…å…³æ‰‹ç»­ï¼Œå¹¶å°†è´§ç‰©è¿é€åˆ°æ‚¨çš„åœ°å€ã€‚</li><li>æˆ‘ä»¬ä¿è¯é€è¾¾çº¦æ—¦**æ‰€æœ‰çœä»½**ã€‚</li>',
        experts_header: 'é€‰å“ä¸“å®¶',
        experts_list: '<li>å‡­å€Ÿæˆ‘ä»¬ä¸°å¯Œçš„ç»éªŒï¼Œæˆ‘ä»¬å¸®åŠ©æ‚¨ä»æ•°ç™¾å®¶ä¾›åº”å•†ä¸­**é€‰æ‹©æœ€ä½³äº§å“**ã€‚</li><li>æˆ‘ä»¬ç¡®ä¿æ‚¨çš„äº§å“ç¬¦åˆè¦æ±‚çš„è´¨é‡å¹¶ç¬¦åˆæ‚¨çš„é¢„ç®—ã€‚</li><li>æˆ‘ä»¬çš„å›¢é˜Ÿå°†ä»£è¡¨æ‚¨ç ”ç©¶å’Œåå•†ä¾›åº”å•†ã€‚</li>',
        safety_header: 'å®‰å…¨ä¸é€æ˜',
        safety_list: '<li>æ‚¨å°†æ”¶åˆ°ä¸€ä»½æ­£å¼çš„**æŠ¼é‡‘æ”¶æ®**ã€‚</li><li>æˆ‘ä»¬æä¾›å®Œæ•´çš„**è´­ä¹°è¯æ˜**ä»¥ç¡®ä¿å®Œå…¨é€æ˜ã€‚</li><li>æ‚¨å¯ä»¥é€šè¿‡æˆ‘ä»¬çš„ä¸“ä¸šå›¢é˜Ÿéšæ—¶**è¿½è¸ªæ‚¨çš„è®¢å•**ã€‚</li>',
        local_platforms_title: 'ä»æœ¬åœ°ä¸­å›½å¹³å°è¿›å£',
        platforms_title:'æˆ‘ä»¬è¦†ç›–çš„å¹³å°', guides_title:'æ‚¨éœ€è¦äº†è§£çš„å…³äºé˜¿é‡Œå·´å·´å’Œé€Ÿå–é€šçš„ä¸€åˆ‡',
        contact_title:'è”ç³»æˆ‘ä»¬', kpi_title:'å¿«é€Ÿæ•°æ®',
        eta_label:'ä¸‹ä¸€é›†è£…ç®±é¢„è®¡åˆ°è¾¾æ—¶é—´',
        contact_addr:'åœ°å€ï¼šAVT, Rae\'d Khalaf Complex, Sweifieh â€“ Amman',
        contact_hours:'å·¥ä½œæ—¶é—´ï¼šå‘¨æ—¥è‡³å‘¨å›› 09:00â€“21:00 â€¢ å‘¨äº”è‡³å‘¨å…­ï¼šä¼‘æ¯',
        form_send:'å‘é€', form_whatsapp:'WhatsApp æ¶ˆæ¯',
        calculator_title: 'ä»·æ ¼è®¡ç®—å™¨',
        calc_price_label: 'äº§å“ä»·æ ¼ï¼ˆç¾å…ƒï¼‰ï¼š', calc_price_placeholder: 'è¾“å…¥ç¾å…ƒä»·æ ¼',
        calc_internal_fee_label: 'å¢ƒå†…è¿è´¹ï¼ˆç¾å…ƒï¼‰ï¼š', calc_internal_fee_placeholder: 'è¾“å…¥è¿è´¹',
        calc_size_label: 'äº§å“ä½“ç§¯ï¼ˆç«‹æ–¹ç±³ï¼‰ï¼š', calc_size_placeholder: 'è¾“å…¥ä½“ç§¯ï¼ˆç«‹æ–¹ç±³ï¼‰',
        calc_button: 'è®¡ç®—ä»·æ ¼',
        calc_result_prefix: 'ğŸ’° æœ€ç»ˆä»·æ ¼ï¼š ', calc_result_suffix: ' çº¦æ—¦ç¬¬çº³å°”'
      }
    };

    function updateContent(lang) {
      const elementsToTranslate = document.querySelectorAll('[id]');
      elementsToTranslate.forEach(el => {
        const id = el.id;
        if (TR[lang] && TR[lang][id]) {
          // Special handling for list items and structured content
          if (el.tagName === 'LI') {
            // Assuming list items are within sections that have a corresponding key in TR
            // This part might need more specific selectors if LI elements are used in multiple contexts
            const parentKey = Object.keys(TR[lang]).find(key => TR[lang][key].includes('<li>'));
            if (parentKey) {
              const listItems = TR[lang][parentKey].split('</li>').filter(item => item.trim() !== '');
              let itemIndex = 0;
              el.parentNode.querySelectorAll('li').forEach(li => {
                if (listItems[itemIndex]) {
                  li.innerHTML = listItems[itemIndex].replace(/<\/?strong>/g, '').replace(/<\/?em>/g, '').trim(); // Remove bold/italic tags from translated text for direct assignment
                  itemIndex++;
                }
              });
              return; // Skip further processing for LI elements to avoid overwriting
            }
          }
          
          // General text content update
          if (el.tagName === 'H1' || el.tagName === 'H2' || el.tagName === 'H3' || el.tagName === 'H4' || el.tagName === 'SPAN' || el.tagName === 'LABEL' || el.tagName === 'BUTTON' || el.tagName === 'A' || el.tagName === 'P' || el.tagName === 'STRONG' || el.tagName === 'LI' || el.tagName === 'DIV' && el.classList.contains('tag') || el.tagName === 'DIV' && el.classList.contains('date') || el.tagName === 'DIV' && el.classList.contains('num') || el.tagName === 'DIV' && el.classList.contains('muted') || el.tagName === 'DIV' && el.classList.contains('kpi') || el.tagName === 'DIV' && el.classList.contains('product') || el.tagName === 'DIV' && el.classList.contains('banner') || el.tagName === 'DIV' && el.classList.contains('tabs-header') || el.tagName === 'DIV' && el.classList.contains('tab-btn') || el.tagName === 'DIV' && el.classList.contains('tab-pane') || el.tagName === 'DIV' && el.classList.contains('tab-actions') || el.tagName === 'DIV' && el.classList.contains('calculator') || el.tagName === 'DIV' && el.classList.contains('row')) {
            // Preserve HTML for elements like 'about_text' or 'hero_desc' that contain bold/strong tags
            if (typeof TR[lang][id] === 'string' && TR[lang][id].includes('<strong>') || TR[lang][id].includes('<em>') || TR[lang][id].includes('<b>') || TR[lang][id].includes('<i>')) {
              el.innerHTML = TR[lang][id];
            } else {
              el.textContent = TR[lang][id];
            }
          } else if (el.tagName === 'INPUT' && el.placeholder) {
            el.placeholder = TR[lang][id + '_placeholder'] || el.placeholder;
          } else if (el.tagName === 'SELECT') {
            // For select, update the options if they are translatable, otherwise assume they are already handled or static.
            // This part is simplified; a more robust solution would involve mapping select options to translations.
            // For now, we assume the options themselves are static or handled by initial HTML.
          } else if (el.tagName === 'OPTION') {
            // This is a fallback if you had translatable options in your HTML
            if (TR[lang][id]) {
              el.textContent = TR[lang][id];
            }
          }
        }
      });
      // Update dir and lang attributes
      htmlElement.lang = lang;
      htmlElement.dir = lang === 'ar' ? 'rtl' : 'ltr';
      localStorage.setItem('lang', lang);
    }

    langSelect.addEventListener('change', (e) => {
      updateContent(e.target.value);
    });

    // Initialize language from localStorage or default to 'ar'
    const savedLang = localStorage.getItem('lang') || 'ar';
    langSelect.value = savedLang;
    updateContent(savedLang);

    // Initialize current year
    document.getElementById('year').textContent = new Date().getFullYear();

    // --- Calculator Functionality ---
    const calculatorTitle = document.getElementById('calculator_title');
    const calcPriceLabel = document.getElementById('price'); // Assuming you meant to get the input by ID
    const calcPricePlaceholder = document.getElementById('price');
    const calcInternalFeeLabel = document.getElementById('internalFee');
    const calcInternalFeePlaceholder = document.getElementById('internalFee');
    const calcSizeLabel = document.getElementById('size');
    const calcSizePlaceholder = document.getElementById('size');
    const calculateButton = document.getElementById('calculate_button');
    const resultDisplay = document.getElementById('result');

    function updateCalculatorLabels(lang) {
        if (TR[lang]) {
            calculatorTitle.textContent = TR[lang].calculator_title;
            document.querySelector('label[for="price"]').textContent = TR[lang].calc_price_label;
            calcPricePlaceholder.placeholder = TR[lang].calc_price_placeholder;
            document.querySelector('label[for="internalFee"]').textContent = TR[lang].calc_internal_fee_label;
            calcInternalFeePlaceholder.placeholder = TR[lang].calc_internal_fee_placeholder;
            document.querySelector('label[for="size"]').textContent = TR[lang].calc_size_label;
            calcSizePlaceholder.placeholder = TR[lang].calc_size_placeholder;
            calculateButton.textContent = TR[lang].calc_button;
        }
    }

    // Update calculator labels on language change
    langSelect.addEventListener('change', (e) => {
      updateContent(e.target.value);
      updateCalculatorLabels(e.target.value);
    });

    // Initial update for calculator labels
    updateCalculatorLabels(savedLang);

    function calculatePrice() {
      const priceUSD = parseFloat(document.getElementById('price').value);
      const internalFeeUSD = parseFloat(document.getElementById('internalFee').value);
      const sizeCBM = parseFloat(document.getElementById('size').value);
      const resultElement = document.getElementById('result');
      const lang = localStorage.getItem('lang') || 'ar'; // Get current language

      if (isNaN(priceUSD) || isNaN(internalFeeUSD) || isNaN(sizeCBM)) {
        resultElement.textContent = 'Please enter valid numbers.';
        return;
      }

      // Assuming a simplified calculation: Product Price + Internal Fee + (Size * Rate)
      // You'll need to define the rate per cubic meter (e.g., $50/CBM)
      const ratePerCBM = 50; // Example rate, adjust as needed
      const totalUSD = priceUSD + internalFeeUSD + (sizeCBM * ratePerCBM);

      // For simplicity, let's assume a fixed exchange rate for now.
      // In a real-world scenario, you'd fetch this or have a dynamic conversion.
      const JOD_per_USD = 0.709; // Example rate, approx. as of current knowledge
      const totalJOD = totalUSD * JOD_per_USD;

      // Use the translated prefix and suffix
      resultElement.innerHTML = `${TR[lang].calc_result_prefix}${totalJOD.toFixed(2)}${TR[lang].calc_result_suffix}`;
    }

    // Attach the calculator function to the button
    window.calculatePrice = calculatePrice; // Make it globally accessible if needed, or directly attach to button if not using inline onclick


    // --- Tab Functionality ---
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabPanes = document.querySelectorAll('.tab-pane');

    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        // Remove active class from all buttons and panes
        tabButtons.forEach(btn => btn.classList.remove('active'));
        tabPanes.forEach(pane => pane.classList.remove('active'));

        // Add active class to the clicked button and its corresponding pane
        button.classList.add('active');
        document.getElementById(`tab-${button.getAttribute('data-tab')}`).classList.add('active');
      });
    });

    // --- Handle Form Submission ---
    function handleFormSubmit(event) {
      event.preventDefault(); // Prevent default form submission
      const nameInput = document.getElementById('input_name');
      const phoneInput = document.getElementById('input_phone');
      const msgInput = document.getElementById('input_msg');

      const name = nameInput.value;
      const phone = phoneInput.value;
      const message = msgInput.value;

      // Construct WhatsApp message
      const lang = localStorage.getItem('lang') || 'ar'; // Get current language
      let whatsappMessage = '';

      if (lang === 'ar') {
          whatsappMessage = `Ø§Ø³Ù…: ${name}\nØ±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨: ${phone}\nØ§Ù„Ø±Ø³Ø§Ù„Ø©: ${message}`;
      } else if (lang === 'en') {
          whatsappMessage = `Name: ${name}\nWhatsApp Number: ${phone}\nMessage: ${message}`;
      } else { // zh
          whatsappMessage = `å§“å: ${name}\nWhatsAppå·ç : ${phone}\næ¶ˆæ¯: ${message}`;
      }


      // Encode the message for URL
      const encodedMessage = encodeURIComponent(whatsappMessage);
      const whatsappUrl = `https://wa.me/+962782706724?text=${encodedMessage}`;

      // Open WhatsApp in a new tab
      window.open(whatsappUrl, '_blank');

      // Optionally clear the form
      nameInput.value = '';
      phoneInput.value = '';
      msgInput.value = '';

      // You might want to show a success message or redirect
      alert("ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨!"); // Simple confirmation
      return false; // Prevent form from actually submitting
    }
    window.handleFormSubmit = handleFormSubmit; // Make it globally accessible

  })();
</script>
